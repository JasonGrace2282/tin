{% extends "base.html" %}
{% load static %}

{% block head %}
  <link rel="stylesheet" type="text/css" href="{% static 'vendor/datetimepicker/jquery.datetimepicker.css' %}" />
  <script type="text/javascript" src="{% static 'vendor/datetimepicker/jquery.datetimepicker.js' %}"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $("#id_due").datetimepicker({
        lazyInit: true,
        timepicker: true,
        format: "Y-m-d H:i:s",
      });
    });
  </script>
{% endblock %}

{% block title %}Turn-In: {{ course.name }}: {% if action == "add" %}Create assignment{% else %}{{ assignment.name }}{% endif %}{% endblock %}

{% block main %}
<h2>{{ course.name }}: {% if action == "add" %}Create assignment{% else %}{{ assignment.name }}{% endif %}</h2>
<form action="" method="post">
  {% csrf_token %}
  <div class="tbl">
    {% for field in assignment_form %}
    <div class="tbl-row">
      <span class="tbl-cell bold" style="vertical-align:middle;padding-right:5px;">{{ field.label_tag }}</span>
      <span class="tbl-cell">{{ field }}</span>
    </div>
    {% endfor %}
  </div>
  {% if not grader_form %}
  <div>Note: You'll be able to upload a grader script after you create the assignment.</div>
  {% endif %}
  <input type="submit" value="{% if action == "add" %}Create{% else %}Save{% endif %}">
</form>

{% if grader_form %}
<h3>Grader File Upload</h3>
<p>Size limit is 1MB.</p>
<h4 style="color:red;">{{ grader_file_errors }}</h4>
<form method="post" enctype="multipart/form-data">
  {% csrf_token %}
  {% if assignment.grader_file %}
  You have already uploaded a grader script. Uploading here will replace it.
  {% else %}
  There is no grader script for this assignment.
  {% endif %}
  <div class="tbl">
    {% for field in grader_form %}
      {% if field.name != "grader_file" %}
        <div class="tbl-row">
          <span class="tbl-cell bold" style="vertical-align:middle;padding-right:5px;">{{ field.label_tag }}</span>
          <span class="tbl-cell">{{ field }}</span>
        </div>
      {% endif %}
    {% endfor %}
    <div class="tbl-row">
      <span class="tbl-cell bold" style="vertical-align:middle;padding-right:5px;"><label for="id_grader_file">Grader file:</label></span>
      <span class="tbl-cell"><input type="file" name="grader_file" id="id_grader_file"></span>
    </div>
  </div>
  <input type="submit" value="Submit">
</form>
{% endif %}

{% endblock %}

