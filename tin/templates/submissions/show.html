{% extends "base.html" %}
{% load staticfiles %}


{% block title %}
Turn-In: {{ assignment.name }}:
{% if request.user.is_teacher %}{{ student.full_name }}:{% endif %}
Submission #{{ submission_number }}
{% endblock %}

{% block head %}
  <script>var submission_json_url = "{% url 'submissions:show_json' submission.id %}";</script>
  <script src="{% static 'js/submissions.show.js' %}"></script>
{% endblock %}

{% block main %}
{% if request.user.is_student %}
<h2>{{ assignment.name }}</h2>
<p>{{ assignment.description }}</h1>

<table id="submission-info">
  <tr>
    <th>Due:</th>
    <td>{{ assignment.due }}</td>
  </tr>
  <tr>
    <th>Submitted:</th>
    <td>{{ submission.date_submitted }}</td>
  </tr>
  <tr>
    <th>On time?</th>
    <td>
      {% if submission.is_on_time %}Yes{% else %}No{% endif %}
    </td>
  </tr>
  {% if request.user.is_student %}
  <tr>
    <th>Grade:</th>
    <td id="grade">
      {% if not submission.has_been_graded %}
      <span class="italic">Not graded yet</span>
      {% else %}
      {{ submission.points_received }}/{{ submission.points_possible }} ({{ submission.grade_percent }})
      {% endif %}
    </td>
  </tr>
  {% endif %}
</table>
{% else %}
<h2>{{ assignment.name }} &mdash; {{ submission.student.full_name }}</h2>
<p>{{ assignment.description }}</h1>

<table id="submission-info">
  <tr>
    <th>Due:</th>
    <td>{{ assignment.due }}</td>
  </tr>
  <tr>
    <th>Submitted:</th>
    <td>{{ submission.date_submitted }}</td>
  </tr>
  <tr>
    <th>On time?</th>
    <td>
      {% if submission.is_on_time %}Yes{% else %}No{% endif %}
    </td>
  </tr>
  <tr>
    <th>Grade:</th>
    <td id="grade">
      {% if not submission.has_been_graded %}
      <span class="italic">Not graded yet</span>
      {% else %}
      {{ submission.points_received }}/{{ submission.points_possible }} ({{ submission.grade_percent }})
      {% endif %}
    </td>
  </tr>
</table>
{% endif%}

<h3 style="border-top:1px solid lightgray;padding-top:15px;">Grader output</h3>
<div id="grader-output"{% if not submission.grader_output %} class="not-graded"{% endif %}>
  {% if submission.grader_output %}
    <code><pre>{{ submission.grader_output }}</pre></code>
  {% else %}
    {% if request.user.is_student %}
      Your code hasn't been graded yet.
    {% else %}
      Submission hasn't been graded yet.
    {% endif %}
  {% endif %}
</div>

{% if not request.user.is_student %}
  <h3 style="border-top:1px solid lightgray;padding-top:15px;">Grader errors</h3>
  <code><pre>{{ submission.grader_errors }}</pre></code>
{% endif %}

<div id="grader-status" class="italic"></div>

<h3 style="border-top:1px solid lightgray;padding-top:15px;">Submission</h3>
<code><pre>{{ submission_text }}</pre></code>

{% endblock %}
